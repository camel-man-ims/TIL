# 4장 - 역할, 책임, 협력

## 1. 객체지향은 협력이다.

* 객체지향을 설계할 때 가장 많이 하는 실수는 협력을 고민하지 않고, 상태와 행동을 결정한다는 것이다.
* 연쇄성
    * 객체는 다른 객체로 요청을 전파하기 때문에, 하나의 요청은 연쇄성을 가질 수 있다.
* 요청을 한다는 것은 곧, 해당 객체가 책임을 갖고 있음을 내포한다.
* 객체의 책임
    * 무엇을 할 수 있는가?(Doing)
        * 즉, 외부에 어떤 서비스를 제공해줄 수 있는가?
    * 무엇을 알고 있는가?(Knowing)
        * 즉, 외부에 어떤 정보를 제공해줄 수 있는가?

## 2. 재판이야기

* 재판에서 왕은 신하에게 증인을 들라한다. 신하는 증인에게 입장할 것을 요청하고, 증인은 왕에게 증언을 전달한다.
* 이 흐름은 전부 메세지를 통해 이루어졌다.
* cf) 협력: 수신자가 무엇을 해줄 수 있는가? // 메세지: 두 객체 사이의 관계를 강조

## 3. 책임

### 3-1) 역할

* 하나의 책임은 여러개의 메세지로 분할될 수 있다.
* 객체지향은 객체에게 특정 책임을 할당하고, 객체간 메세지 수신정도를 정하는 것부터가 시작이다.
* 역할을 사용하면 N가지 협력의 경우의 수를 하나의 협력의 경우의 수로 추상화시킬 수 있다.
* 이 때, 모든 객체가 하나의 책임에 할당될 수는 없다.
    * 거지가 재판장의 역할에 할당될 수는 없다.
    * 책임에 할당되려면, 동일한 메세지를 이해할 수 있어야 한다.
        * 즉, 행동이 호환돼야 한다.
    * 동일한 메세지를 수신할 수 있는 객체는, 같은 역할을 수행할 수 있다.
        * 동일한 메세지를 수신할 수 없다면 같은 역할을 수행할 수 없다.
    * 간단하게 말해서, 객체가 역할을 맡으려면 역할에 해당되는 모든 책임을 수행할 수 있어야 한다.

### 3-2) 역할과 객체: 일반화/추상화

* 역할은 객체의 추상화 된 형태이다.
* 즉, 역할은 객체보다 일반적이고, 객체는 역할보다 추상적이다.
* 이 말은 곧, 객체가 역할보다 더 많은 책임을 가질 수 있음을 의미한다.
    * 예를 들어, 왕의 경우 재판장 뿐만 아니라 국왕, 남편, 행정관 등 여러 역할 및 책임이 있다.
  
## 4. 객제 지향 설계 기법

### 4-1) 목록들

1. RDD(Reponsibilty-Driven Design)
    * 책임 주도 설계 기법
2. 디자인 패턴
3. TDD

### 4-2) 자세 설명

* RDD
    * 올바른 책임을 적합한 객체에게 할당하는 것
* 디자인 패턴
    * 객체 지향적으로 생각하지 못하더라도, 해당 디자인 패턴을 익히고 따라가는 것만으로 객체지향적으로 설계가 될 수 있다.
* TDD
    * TDD에서 Test Code는 부가적인 역할이다.
        * TDD에서의 핵심은 역할, 책임, 협력이 적합한 지 피드백을 받을 수 있다는 것이다.
    * TDD의 설계기법은 RDD의 기본 개념을 따른다.
    * TDD는 객체가 이미 존재한다고 가정하고, 해당 객체에 어떤 메세지를 전송할 것인가 생각해보는 기법이다.

### 4-3) 책임의 분할

* 객체지향의 핵심은 시스템의 책임을 객체에게 분할하는 것이다.
* 객체는 다시 협력자에게 책임을 분할시키며, 책임의 크기가 작아진다.